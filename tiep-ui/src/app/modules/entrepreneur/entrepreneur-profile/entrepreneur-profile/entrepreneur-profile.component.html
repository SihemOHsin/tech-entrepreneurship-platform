
<div class="w3-light-grey" style="min-height: 100vh;">
  <div class="w3-main" style="margin-left:300px;margin-top:43px;">

    <div class="w3-container w3-clear ">
      <!-- The Grid -->
      <div class="w3-row w3-row-padding" style="margin-top:60px;">
        <!-- Left Column -->
        <div class="w3-col m3">

          <!-- Profile -->
          <!-- Profile -->
          <div *ngIf="showCreateForm" class="w3-card w3-round w3-white">
            <div class="w3-container">
              <h4 class="w3-center w3-margin">Create Your Business Profile</h4>
              <form [formGroup]="createBusinessForm" (ngSubmit)="onSubmit()">
                <p>
                  <label>Business Name</label>
                  <input formControlName="bizname" class="w3-input w3-border" type="text" required>
                </p>
                <p>
                  <label>Location</label>
                  <input formControlName="location" class="w3-input w3-border" type="text" required>
                </p>
                <p>
                  <label>Industry</label>
                  <input formControlName="industry" class="w3-input w3-border" type="text" required>
                </p>
                <p>
                  <label>Date of Creation</label>
                  <input formControlName="dateOfBizCreation" class="w3-input w3-border" type="date" required>
                </p>
                <p>
                  <button class="w3-button w3-block w3-black" type="submit">Create Business</button>
                </p>
              </form>
            </div>
          </div>

          <!-- Upload Logo -->
          <div *ngIf="!showCreateForm && showUploadLogoForm" class="w3-card w3-round w3-white">
            <div class="w3-container">
              <h4 class="w3-center w3-margin">Upload Your Business Logo</h4>
              <p>
                <label>Business Logo</label>
                <input (change)="onFileChange($event)" class="w3-input w3-border" type="file">
              </p>
              <p>
                <button class="w3-button w3-block w3-black" (click)="onUploadLogo()">Upload Logo</button>
              </p>
            </div>
          </div>

          <div *ngIf="!showCreateForm && !showUploadLogoForm" class="w3-card w3-round w3-white">
            <div class="w3-container">
              <h4 class="w3-center w3-margin">My Profile</h4>
              <p class="w3-center">
                <img [src]="businessLogo ? 'data:image/png;base64,' + businessLogo : '/assets/logo.png'" class="w3-circle business-logo" alt="Business Logo">
              </p>
              <hr>
              <p><i class="fa fa-user fa-fw w3-margin-right w3-text-theme"></i> {{ firstName }}</p>
              <p><i class="fa fa-home-user fa-fw w3-margin-right w3-text-theme"></i> {{ businessName }}</p>
              <p><i class="fa fa-home fa-fw w3-margin-right w3-text-theme"></i> {{ businessLocation }}</p>
              <p><i class="fa fa-business-time fa-fw w3-margin-right w3-text-theme"></i> {{ businessIndustry }}</p>
              <p><i class="fa fa-birthday-cake fa-fw w3-margin-right w3-text-theme"></i> {{ businessCreationDate }}</p>
              <p><i class="fa fa-mail-bulk fa-fw w3-margin-right w3-text-theme"></i> {{ contactEmail }}</p>
            </div>
            <button class="w3-button w3-block w3-theme-l1 w3-margin-bottom w3-text-grey" (click)="showUpdateForm = true"><i class="fa fa-pencil fa-fw w3-margin-right w3-text-theme"></i>Update Profile</button>

          </div>

          <!-- Update Form -->
          <div *ngIf="showUpdateForm" class="w3-card w3-round w3-white">
            <div class="w3-container">
              <h4 class="w3-center w3-margin">Update Your Business Profile</h4>
              <form [formGroup]="updateBusinessForm" (ngSubmit)="onUpdateSubmit()">
                <label>Business Name</label>
                <input type="text" formControlName="bizname" class="w3-input w3-border w3-round" placeholder="Enter Business Name">
                <label>Location</label>
                <input type="text" formControlName="location" class="w3-input w3-border w3-round" placeholder="Enter Location">
                <label>Industry</label>
                <input type="text" formControlName="industry" class="w3-input w3-border w3-round" placeholder="Enter Industry">
                <label>Date of Creation</label>
                <input type="date" formControlName="dateOfBizCreation" class="w3-input w3-border w3-round">
                <button type="submit" class="w3-button w3-block w3-black w3-section w3-padding">Update</button>
              </form>
              <button class="w3-button w3-block w3-black w3-margin-bottom" (click)="onUpdateLogoClick()">Update Logo</button>
            </div>
          </div>


          <br>
          <!-- Skills Section -->
          <!-- Show the form for creating a new skill if there are no skills -->
          <div *ngIf="showCreateSkillForm && !showUpdateSkillForm && !showUploadSkillForm">
            <div class="w3-card w3-round w3-white">
              <div class="w3-container">
                <h4 class="w3-center w3-margin">Add Your Business Needs</h4>
                <form [formGroup]="createSkillForm" (ngSubmit)="onCreateSkill()">
                  <p>
                    <label>My Job Needs</label>
                    <input formControlName="title" class="w3-input w3-border " type="text" required>
                  </p>
                  <p>
                    <label>Description</label>
                    <textarea formControlName="description" class="w3-input w3-border" rows="3" required></textarea>
                  </p>
                  <p>
                    <label>My Min proposed Price</label>
                    <input formControlName="minProposedPrice" class="w3-input w3-border" type="text" required>
                  </p>
                  <p>
                    <label>My Max proposed Price</label>
                    <textarea formControlName="maxProposedPrice" class="w3-input w3-border" rows="3" required></textarea>
                  </p>

                  <p>
                    <button class="w3-button w3-block w3-black" type="submit">Add explanation</button>
                  </p>
                </form>
              </div>
            </div>
          </div>

          <!-- Show the list of skills -->
          <div class="w3-card w3-round w3-white" *ngIf="!showCreateSkillForm && !showUpdateSkillForm && !showUploadSkillForm">
            <div class="w3-container">
              <h4 class="w3-center w3-margin">Needs</h4>
              <div *ngFor="let skill of skills">
                <h5>{{ skill.title }}</h5>
                <p>{{ skill.description }}</p>
                <button class="w3-button w3-small w3-margin-bottom w3-black" (click)="onEditSkill(skill)">Edit</button>
              </div>
            </div>
          </div>

          <!-- Show the form for updating a skill if there's a selected skill -->
          <div *ngIf="!showCreateSkillForm && showUpdateSkillForm && !showUploadSkillForm">
            <div class="w3-card w3-round w3-white">
              <div class="w3-container">
                <h4 class="w3-center w3-margin">Update needs</h4>
                <form [formGroup]="updateSkillForm" (ngSubmit)="onUpdateSkill()">
                  <p>
                    <label>My Job Needs</label>
                    <input formControlName="title" class="w3-input w3-border" type="text" required>
                  </p>
                  <p>
                    <label>Description</label>
                    <textarea formControlName="description" class="w3-input w3-border" rows="3" required></textarea>
                  </p>
                  <p>
                    <button class="w3-button w3-block w3-black" type="submit">Update explanation</button>
                  </p>
                </form>
              </div>
            </div>
          </div>
          <br>

          <!-- Alert Box -->
          <div class="w3-container w3-display-container w3-round w3-theme-l4 w3-border w3-theme-border w3-margin-bottom w3-hide-small">
        <span onclick="this.parentElement.style.display='none'" class="w3-button w3-theme-l3 w3-display-topright">
          <i class="fa fa-remove"></i>
        </span>
            <p><strong>Hey!</strong></p>
            <p>Experts are providing advice for your profile. Great work is on the way.</p>
          </div>

          <!-- End Left Column -->
        </div>

        <!-- Middle Column -->
        <div class="w3-col m8">

          <div class="w3-row-padding">
            <div class="w3-col m12">
              <div class="w3-card w3-round w3-white">
                <div class="w3-container w3-padding">
                  <h6 class=" w3-opacity w3-padding">{{ businessName }}> Profile</h6>
                  <h4 class="w3-clear w3-margin"> Technology is best when it brings people together.</h4>
                  <p contenteditable="true" class="w3-border w3-padding w3-light-grey">Below is a list of experts who have given feedback on this profile.</p>
                  <h6 class="w3-clear w3-margin"><i class="fa fa-comment"></i> Comment</h6>
                </div>
              </div>
            </div>
          </div>

          <div *ngFor="let reviewPair of reviews | slice:0:reviews.length; let i = index">
            <div class="w3-container w3-card w3-white w3-round w3-margin" *ngIf="i % 2 === 0"><br>
              <div class="w3-half" *ngIf="reviews[i]">
                <img [src]="getBusinessLogo(reviews[i].reviewerBusinessId)" alt="Avatar" class="w3-left w3-circle w3-margin-right" style="width:60px">
                <h4 class="w3-opacity">{{ getBusinessName(reviews[i].reviewerBusinessId) }}</h4><br>
                <hr class="w3-clear">
                <p>{{ reviews[i].description }}</p>
                <button class="w3-button w3-small w3-light-grey w3-margin-bottom" (click)="makeOrder(reviews[i].reviewerBusinessId)">Order</button>
              </div>
              <div class="w3-half" *ngIf="reviews[i + 1]">
                <img [src]="getBusinessLogo(reviews[i + 1].reviewerBusinessId)" alt="Avatar" class="w3-left w3-circle w3-margin-right" style="width:60px">
                <h4 class="w3-opacity">{{ getBusinessName(reviews[i + 1].reviewerBusinessId) }}</h4><br>
                <hr class="w3-clear">
                <p>{{ reviews[i + 1].description }}</p>
                <button class="w3-button w3-small w3-light-grey w3-margin-bottom" (click)="makeOrder(reviews[i+1].reviewerBusinessId)">Order</button>
              </div>
            </div>
          </div>


          <!-- End Middle Column -->
        </div>

        <!-- End Grid -->
      </div>

      <!-- End Page Container -->
    </div>
    <br>



  </div>
</div>
